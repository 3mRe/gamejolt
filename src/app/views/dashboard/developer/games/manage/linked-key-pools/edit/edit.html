<div class="row">
	<div class="col-sm-10 col-md-7 col-lg-6">

		<h2 class="section-header">
			Edit Linked Key Pool
		</h2>

		<gj-form-dashboard-game-linked-key-pool
			game="manageCtrl.game"
			gj-linked-key-pool="editCtrl.linkedKeyPool"
			>
		</gj-form-dashboard-game-linked-key-pool>

	</div>
	<div class="col-sm-10 col-md-4 col-md-offset-1 col-lg-5">

		<h5><strong>Available</strong></h5>
		<p>
			{{ editCtrl.linkedKeyPool.available_count || 0 | number }} / {{ editCtrl.linkedKeyPool.total_count || 0 | number }}
			<small>({{ editCtrl.linkedKeyPool.available_count / editCtrl.linkedKeyPool.total_count * 100 | number:2 }}%)</small>
		</p>
		<div class="progress progress-thin">
			<div class="progress-bar" ng-style="{ width: (editCtrl.linkedKeyPool.available_count / editCtrl.linkedKeyPool.total_count * 100) + '%' }"></div>
		</div>

		<hr>

		<div>
			<a class="btn btn-danger-outline btn-block" ng-click="editCtrl.removePool( editCtrl.linkedKeyPool )">
				<span class="jolticon jolticon-remove"></span>
				Remove Linked Key Pool
			</a>
		</div>

	</div>
</div>

<h2 translate>
	<div class="section-header-controls">
		<button class="btn btn-success-outline" ng-click="editCtrl.isShowingAddLinkedKeys = !editCtrl.isShowingAddLinkedKeys">
			<span class="jolticon jolticon-add"></span>
			Linked Keys
		</button>
	</div>

	Linked Keys
</h2>

<div class="full-bleed-xs" gj-expand-when="editCtrl.isShowingAddLinkedKeys">
	<div class="well fill-lightest">
		<div class="row">
			<div class="col-sm-10 col-md-8 col-lg-6 col-centered">

				<gj-form-dashboard-game-linked-key-pool-add-linked-keys
					linked-key-pool="editCtrl.linkedKeyPool"
					gj-form-submit-handler="editCtrl.onNewLinkedKeysAdded()"
					>
				</gj-form-dashboard-game-linked-key-pool-add-linked-keys>

			</div>
		</div>
	</div>
</div>


<div class="well fill-lightest full-bleed-xs">

	<form class="form-inline">
		<div class="form-group">
			<input type="text" class="form-control" placeholder="Filter" ng-model="editCtrl.search.filter" style="min-width: 250px">
		</div>

		<button class="btn btn-outline" ng-click="editCtrl.searchLinkedKeys()">
			Submit
		</button>
	</form>

</div>

<div class="table-responsive">
	<table class="table table-hover">
		<thead>
			<tr>
				<th>Key</th>
				<th></th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="linkedKey in editCtrl.linkedKeys track by linkedKey.id">
				<td >
					<code>{{ ::linkedKey.keystr }}</code>
				</td>
				<td style="text-align: right">
					<a class="btn btn-danger-outline btn-sm btn-sparse"
						ng-click="editCtrl.removeLinkedKey( linkedKey )"
						>
						<span class="jolticon jolticon-remove"></span>
					</a>
				</td>
			</tr>
		</tbody>
	</table>
</div>
